<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Signup</title>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
    />
    <link rel="stylesheet" href="index.css" />
  </head>
  <body>
    <script src="index.js"></script>
    <div class="main-container">
      <div class="frame">
        <div class="flex-row-be">
          <div class="username"><span class="username-1">Username</span></div>
          <div class="password"><span class="password-2">Password</span></div>
          <div class="username-frame"></div>
          <div class="password-frame"></div>
        </div>
        <div class="flex-row-e">
          <div class="first-name">
            <span class="first-name-3">First Name</span>
          </div>
          <div class="last-name">
            <span class="last-name-4">Last Name</span>
          </div>
          <div class="first-name-frame"></div>
          <div class="last-name-frame"></div>
        </div>
        <div class="flex-row-a">
          <div class="email-address">
            <span class="email-address-5">Email Address</span>
          </div>
          <div class="email-address-frame"></div>
        </div>
        <button class="create-account-button">
          <span class="create-account">Create Account</span>
        </button>
        <div class="flex-row-b">
          <div class="already-have-account">
            <span class="already-have-account-6"
              >Already have an account?
            </span>
          </div>
          <div class="button">
            <div class="button-7"><span class="login">Login</span></div>
          </div>
        </div>
        <div class="flex-row-e-8">
          <span class="create-account-9">Create Account</span>
          <div class="frame-a">
            <div class="flex-row-e-b">
              <div class="username-c">
                <span class="username-d">Username</span>
              </div>
              <div class="password-e">
                <span class="password-f">Password</span>
              </div>
              <div class="username-frame-10"></div>
              <div class="password-frame-11"></div>
            </div>
            <div class="flex-row-df">
              <div class="first-name-12">
                <span class="first-name-13">First Name</span>
              </div>
              <div class="last-name-14">
                <span class="last-name-15">Last Name</span>
              </div>
              <div class="first-name-frame-16"></div>
              <div class="last-name-frame-17"></div>
            </div>
            <div class="flex-row">
              <div class="email-address-18">
                <span class="email-address-19">Email Address</span>
              </div>
              <div class="email-address-frame-1a"></div>
            </div>
            <div class="create-account-button-1b">
              <span class="create-account-1c">Create Account</span>
            </div>
            <div class="already-have-account-1d">
              <span class="already-have-account-1e"
                >Already have an account?
              </span>
            </div>
            <div class="flex-row-da">
              <span class="create-account-1f">Create Account</span>
              <div class="frame-20">
                <div class="flex-row-bdf">
                  <button class="navigation-pill">
                    <span class="contact">Contact</span></button
                  ><button class="navigation-pill-21">
                    <span class="faq">FAQ</span></button
                  ><button class="nav-pill">
                    <span class="services-plus">Services +</span></button
                  ><button class="nav-pill-22">
                    <span class="about">About</span></button
                  ><button class="nav-pill-23">
                    <span class="home">Home</span>
                  </button>
                </div>
                <span class="create-account-24">Create Account</span>
                <div class="flex-row-bd">
                  <div class="username-25">
                    <span class="username-text">Username</span>
                  </div>
                  <div class="password-26">
                    <span class="password-text">Password</span>
                  </div>
                  <div class="username-frame-27">
                    <input
                      type="email"
                      id="username_input"
                      class="input-email"
                      placeholder=""
                    />
                  </div>
                  <div class="password-frame-28">
                    <input
                      id="password_input"
                      type="password"
                      class="input-email"
                      placeholder=""
                    />
                  </div>
                </div>
                <div class="flex-row-29">
                  <div class="first-name-2a">
                    <span class="first-name-text">First Name</span>
                  </div>
                  <div class="last-name-2b">
                    <span class="last-name-text">Last Name</span>
                  </div>
                  <div class="first-name-frame-2c">
                    <input
                      id="firstname_input"
                      type="text"
                      class="input-phone"
                      placeholder=""
                    />
                  </div>
                  <div class="last-name-frame-2d">
                    <input
                      id="lastname_input"
                      type="text"
                      class="input-phone"
                      placeholder=""
                    />
                  </div>
                </div>
                <div class="flex-row-f">
                  <div class="email-address-2e">
                    <span class="email-address-2f">Email Address</span>
                  </div>
                  <div class="email-address-frame-30">
                    <input
                      id="email_input"
                      type="email"
                      class="input-phone"
                      placeholder=""
                    />
                  </div>
                </div>
                <a href="#" id="register_button">
                  <div class="create-account-button-31">
                    <span class="create-account-32">Create Account</span>
                  </div>
                </a>
                <div class="flex-row-add">
                  <div class="already-have-account-33">
                    <span class="already-have-account-34"
                      >Already have an account?
                    </span>
                  </div>
                  <div class="button-35">
                    <div class="button-36">
                      <span class="login-37">Login</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="crmrs"></div>
      <span class="find-your-service-today">Find your service<br />today!</span
      ><span class="find-your-service-today-38"
        >Find your service<br />today!</span
      >
      <div class="pngwing-com"></div>
    </div>
  </body>
  <script>
    // The sign function defined here
    async function signup(event) {
      alert("is it working");
      event.preventDefault(); // Prevent the form from submitting the default way
      const username = document.getElementById("username_input").value;
      const password = document.getElementById("password_input").value;
      const firstname = document.getElementById("firstname_input").value;
      const lastname = document.getElementById("lastname_input").value;
      const email = document.getElementById("email_input").value;

      alert("working");
      try {
        const response = await fetch("http://localhost:3000/users/register", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            username,
            password,
            firstname,
            lastname,
            email,
          }),
        });

        // Handle the response from the server
        const data = await response.json();

        if (response.ok) {
          // Redirect to login page
          window.location.href = "../login/index.html?signup=success"; // Adjust the path to your dashboard
        } else {
          alert(data.message || "Something went wrong. Try again"); // "Invalid username or password"
        }
      } catch (error) {
        console.error("Error during login:", error);
        alert(
          "An error occurred while trying to log in. Please try again later."
        );
      }
    }

    // Attach the login function to the button click
    document
      .getElementById("register_button")
      .addEventListener("click", signup);
  </script>
</html>
